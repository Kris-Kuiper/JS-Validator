/**
 * JS Validator
 *
 * @link      http://github.com/Kris-Kuiper/JS-Validator
 * @copyright Copyright (c) 2017 JS-Validator.
 * @license   GNU AFFERO GENERAL PUBLIC LICENSE
 */
function Validator(e,t){function s(){var e={values:[],fieldnames:[],glue:null,name:null,format:null};this.setValues=function(t){e.values=t},this.setFieldnames=function(t){e.fieldnames=t},this.getFieldnames=function(){return e.fieldnames},this.glue=function(t){return e.glue=t,this},this.format=function(t){return e.format=t,this},this.name=function(t){return e.name=t,this},this.getName=function(){return e.name},this.combine=function(){if(e.values.length>0){if(null!==e.glue)return e.values.join(e.glue);for(var t in e.values)e.format=e.format.replace("%s",e.values[t]);return e.format}}}var i={field:null,prefix:null,parameters:null,message:null,value:null,values:null,object:null,getField:function(){return this.field},getPrefix:function(){return this.prefix},getParameters:function(){return this.parameters},getMessage:function(){return this.message},getValue:function(){return this.value},getValues:function(){return this.values},getObject:function(){return this.object},setField:function(e){this.field=e},setPrefix:function(e){this.prefix=e},setParameters:function(e){this.parameters=e},setMessage:function(e){this.message=e},setValue:function(e){this.value=e},setValues:function(e,t){this.values[e]=t},setObject:function(e){this.object=e}},a=[],r=[],n={},e=e,u={short:[],full:[]},l={},o={accepted:{message:"Must be accepted",isValid:function(){return!0===this.getObject().checked}},after:{message:"Date should be after %s",isValid:function(){var e,t,s=this.getValue(),i=this.getParameters(),a=i[0],r=i[1];return!(!(e=c(s,r))||!(t=c(a,r)))&&e.getTime()>t.getTime()}},alpha:{message:"Only letters allowed (a-z)",isValid:function(){return this.getValue()&&null!==this.getValue().match(/^[a-zA-Z]+$/)}},alphadash:{message:"Only letters a-z, digits 0-9, dashes and underscores allowed",isValid:function(){return this.getValue()&&null!==this.getValue().match(/^[a-zA-Z0-9_-]+$/)}},alphanumeric:{message:"Only letters and numbers allowed (a-z, 0-9)",isValid:function(){return this.getValue()&&null!==this.getValue().match(/^[a-zA-Z0-9]+$/)}},before:{message:"Date should be before %s",isValid:function(){var e,t,s=this.getValue(),i=this.getParameters(),a=i[0],r=i[1];return!(!(e=c(s,r))||!(t=c(a,r)))&&e.getTime()<t.getTime()}},between:{message:'Must be between "%s" and "%s"',isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "between" rule';if(void 0===t[1])throw'Missing argument 2 for "between" rule';return"string"==typeof e&&(parseFloat(e)>=parseFloat(t[0])&&parseFloat(e)<=parseFloat(t[1]))}},contains:{message:'Must contain "%s"',isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "contains" rule';return"string"==typeof e&&null!==e.match(t[0])}},different:{message:'Can not have the same value as "%s" field',isValid:function(){var e=this.getParameters();return!(this.getValue()===d(e[0],this.prefix))}},email:{message:"Should be a valid email address",isValid:function(){var e=this.getValue();return"string"==typeof e&&/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(e)}},equals:{message:'Must be equal to "%s"',isValid:function(){var e=this.getValue(),t=this.getParameters(),s=!1;if(void 0===t[0])throw'Missing argument 1 for "equals" rule';return void 0!==t[1]&&(s=t[1]),"string"==typeof e&&!0==(!0===s?e===t[0]:e==t[0])}},in:{message:"Invalid input",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "in" rule';return t[0].indexOf(e)>=0}},ip:{message:"Invalid IP address",isValid:function(){var e=this.getValue();if("string"==typeof e){var t=/^((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*::((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*|((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4})){7}$/;return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)||t.test(e)}return!1}},ipv4:{message:"Invalid IPv4 address",isValid:function(){var e=this.getValue();return"string"==typeof e&&/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}},ipv6:{message:"Invalid IPv6 address",isValid:function(){var e=this.getValue();return"string"==typeof e&&/^((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*::((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*|((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4})){7}$/.test(e)}},isdate:{message:"Must be a valid date",isValid:function(){var e=this.getValue(),t=this.getParameters()[0];return!1!==c(e,t)}},isint:{message:"Must be an integer number",isValid:function(){return parseInt(this.getValue())==this.getValue()}},isnumeric:{message:"Must be a number",isValid:function(){var e=this.getValue();return!isNaN(parseFloat(e))&&isFinite(e)}},json:{message:"Invalid JSON string",isValid:function(){try{JSON.parse(this.getValue())}catch(e){return!1}return!0}},length:{message:"Should be %s characters long",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "length" rule';return"string"==typeof e&&e.length==t[0]}},lengthbetween:{message:"Should be between %s and %s characters long",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "lengthbetween" rule';if(void 0===t[1])throw'Missing argument 2 for "lengthbetween" rule';return"string"==typeof e&&(e.length>=t[0]&&e.length<=t[1])}},lengthmax:{message:"Maximum %s characters",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "lengthmax" rule';return"string"==typeof e&&e.length<=t[0]}},lengthmin:{message:"Minimum %s characters",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "lengthmin" rule';return"string"==typeof e&&e.length>=t[0]}},max:{message:"Must be less than or equal to %s",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "max" rule';return"string"==typeof e&&parseFloat(e)<=parseFloat(t[0])}},maxwords:{message:"Maximum of %s words exceeded",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "words" rule';return""===e.trim()&&0===parseInt(t[0])||e.trim().split(" ").length<=parseInt(t[0])}},min:{message:"Must be greater than or equal to %s",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "max" rule';return"string"==typeof e&&parseFloat(e)>=parseFloat(t[0])}},minwords:{message:"A minimum of %s words is required",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "words" rule';return""===e.trim()&&0===parseInt(t[0])||e.trim().split(" ").length>=parseInt(t[0])}},notcontains:{message:'May not contain "%s"',isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "notcontains" rule';return"string"==typeof e&&null===e.match(t[0])}},notequals:{message:'Must not be equal to "%s"',isValid:function(){var e=this.getValue(),t=this.getParameters(),s=!1;if(void 0===t[0])throw'Missing argument 1 for "notequals" rule';return void 0!==t[1]&&(s=t[1]),"string"==typeof e&&!0!=(!0===s?e===t[0]:e==t[0])}},notin:{message:"Invalid input",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "in" rule';return t[0].indexOf(e)<0}},present:{message:"Required",isValid:function(){return!(null===this.getValue()||void 0===this.getValue())}},regex:{message:"Invalid value",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "regex" rule';var s=t[0];if("string"==typeof t[0]&&(s=new RegExp(t[0])),"object"!=typeof s)throw'Argument 1 for "regex" rule should be a valid Regex object';return"string"==typeof e&&s.test(e)}},url:{message:"No valid URL",isValid:function(){var e=this.getValue();return"string"==typeof e&&/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)}},words:{message:"Amount of words is not equal to %s",isValid:function(){var e=this.getValue(),t=this.getParameters();if(void 0===t[0])throw'Missing argument 1 for "words" rule';return""===e.trim()&&0===parseInt(t[0])||e.trim().split(" ").length===parseInt(t[0])}}},f=function(t,s,i,r,n){for(var u in s)a.push({rule:t,field:s[u],object:h(s[u],e),parameters:i,closure:r,prefix:e,message:n})},g=function(e){message=e.message,void 0===e.message&&(message=o[e.rule].message);for(var t in e.parameters)message=message.replace("%s",e.parameters[t]);if(u.short[e.field]={message:message,field:e.object},void 0!==e.prefix){var s=e.prefix+"["+e.field+"]";u.full[s]={message:message,field:e.object}}else u.full[e.field]={message:message,field:e.object}},h=function(e,s){return null!==s&&void 0!==s&&(e=s+"["+e+"]"),(void 0!==t&&void 0!==t.querySelector?t:document).querySelector('[name="'+e+'"]')},d=function(e,t){for(var s in r)if(r[s].getName()===e)return r[s].combine();null!==t&&void 0!==t&&(e=t+"["+e+"]");var i=h(e),a=null;if(null!==i)switch(i.nodeName.toLowerCase()){case"input":case"textarea":a=i.value;break;case"select":a=i.options[i.selectedIndex].value}return a},m=function(e){if(e===a.length)return n.end&&n.end(),0===Object.keys(u.short).length?n.passes&&n.passes():n.fails&&n.fails()},c=function(e,t){var s="",i=[];if("string"==typeof e){for(var a in t)switch(t[a]){case"Y":s+="([0-9]{4})",i.push("year");break;case"y":s+="([0-9]{2})",i.push("year");break;case"n":s+="([1-9]|1[0-2])",i.push("month");break;case"m":s+="(0[1-9]|1[0-2])",i.push("month");break;case"d":s+="(0[1-9]|1[0-9]|2[0-9]|3[0-1])",i.push("day");break;case"j":s+="([1-9]|1[0-9]|2[0-9]|3[0-1])",i.push("day");break;case"g":s+="([1-9]|1[0-2])",i.push("hour");break;case"G":s+="([0-9]|1[0-9]|2[0-3])",i.push("hour");break;case"h":s+="([0-9]|[1-5][0-9])",i.push("hour");break;case"H":s+="(0[0-9]|[1-5][0-9])",i.push("hour");break;case"i":s+="([0-5][0-9])",i.push("minute");break;case"s":s+="([0-5][0-9])",i.push("second");break;default:s+="\\"+t[a]}var r=e.match("^"+s+"$");if(null!==r){var n={year:null,month:null,day:null,hour:null,minute:null,second:null};for(var a in i)n[i[a]]=r[1+parseInt(a)];var u=new Date(n.year,n.month-1,n.day,n.hour,n.minute,n.second,0);if(u.getDate()===parseInt(n.day))return u}}return!1},v=function(e,t){return void 0!==l[e]&&!1===l[e]&&""===t.trim()};this.exec=function(){n.start&&n.start();var e=0;for(var t in a){var s=d(a[t].field,a[t].prefix);if("function"!=typeof a[t].closure){var i=a[t].rule,u=o[i];if(u.setField(a[t].field),u.setValue(s),u.setPrefix(a[t].prefix),u.setParameters(a[t].parameters),u.setObject(h(a[t].field,a[t].prefix)),!1===v(a[t].field,s)&&!1===u.isValid()){g(a[t]);for(var l in r)if(r[l].getName()===a[t].field){var f=r[l].getFieldnames();for(var c in f)a[t].field=f[c],g(a[t]);break}}m(++e)}else a[t].closure(a[t].field,s,function(){return g(a[t]),m(++e)},function(){m(++e)})}},this.extend=function(e,t,s){"string"==typeof e&&(e=[e]),f(null,e,null,t,s)},this.combine=function(){var t=arguments,i=[];for(field in t)i.push(d(t[field],e));return comb=new s,comb.setValues(i),comb.setFieldnames(t),r.push(comb),comb},this.field=function(){var e=arguments,t={};for(var s in o)!function(s){t[s]=function(){return f(s,e,arguments),this}}(s);return t.required=function(t){void 0===t&&(t=!0);for(var s in e)l[e[s]]=t;return this},t},this.setMessage=function(){var e=arguments,t={};for(var s in o)!function(s){t[s]=function(t){if(0===e.length)for(var i in a)a[i].rule===s&&(a[i].message=t);else for(var i in a)for(var r in e)a[i].rule===s&&e[r]===a[i].field&&(a[i].message=t);return this}}(s);return t},this.getMessages=function(e){return!0===e?u.full:u.short},this.getMessage=function(e){return void 0!==u.short[e]?u.short[e]:u.full[e]},this.on=function(e,t){n[e]=t};for(var p in o){var V=o[p];o[p]=Object.create(i);for(var b in V)o[p][b]=V[b]}}
