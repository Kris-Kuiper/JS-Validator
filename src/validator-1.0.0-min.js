/**
 * JS Validator
 *
 * @link      http://github.com/Kris-Kuiper/JS-Validator
 * @copyright Copyright (c) 2017 JS-Validator.
 * @license   GNU AFFERO GENERAL PUBLIC LICENSE
 */
function Validator(a,b){function c(){var a={values:[],fieldnames:[],glue:null,name:null,format:null};this.setValues=function(b){a.values=b},this.setFieldnames=function(b){a.fieldnames=b},this.getFieldnames=function(){return a.fieldnames},this.glue=function(b){return a.glue=b,this},this.format=function(b){return a.format=b,this},this.name=function(b){return a.name=b,this},this.getName=function(){return a.name},this.combine=function(){if(a.values.length>0){if(null!==a.glue)return a.values.join(a.glue);for(var b in a.values)a.format=a.format.replace("%s",a.values[b]);return a.format}}}var d={field:null,prefix:null,parameters:null,message:null,value:null,values:null,object:null,getField:function(){return this.field},getPrefix:function(){return this.prefix},getParameters:function(){return this.parameters},getMessage:function(){return this.message},getValue:function(){return this.value},getValues:function(){return this.values},getObject:function(){return this.object},setField:function(a){this.field=a},setPrefix:function(a){this.prefix=a},setParameters:function(a){this.parameters=a},setMessage:function(a){this.message=a},setValue:function(a){this.value=a},setValues:function(a,b){this.values[a]=b},setObject:function(a){this.object=a}},e=[],f=[],g={},a=a,i={short:[],full:[]},j={},k={accepted:{message:"Must be accepted",isValid:function(){return!0===this.getObject().checked}},after:{message:"Date should be after %s",isValid:function(){var e,f,a=this.getValue(),b=this.getParameters(),c=b[0],d=b[1];return!(!(e=q(a,d))||!(f=q(c,d)))&&e.getTime()>f.getTime()}},alpha:{message:"Only letters allowed (a-z)",isValid:function(){return this.getValue()&&null!==this.getValue().match(/^[a-zA-Z]+$/)}},alphadash:{message:"Only letters a-z, digits 0-9, dashes and underscores allowed",isValid:function(){return this.getValue()&&null!==this.getValue().match(/^[a-zA-Z0-9_-]+$/)}},alphanumeric:{message:"Only letters and numbers allowed (a-z, 0-9)",isValid:function(){return this.getValue()&&null!==this.getValue().match(/^[a-zA-Z0-9]+$/)}},before:{message:"Date should be before %s",isValid:function(){var e,f,a=this.getValue(),b=this.getParameters(),c=b[0],d=b[1];return!(!(e=q(a,d))||!(f=q(c,d)))&&e.getTime()<f.getTime()}},between:{message:'Must be between "%s" and "%s"',isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "between" rule';if(void 0===b[1])throw'Missing argument 2 for "between" rule';return"string"==typeof a&&(parseFloat(a)>=parseFloat(b[0])&&parseFloat(a)<=parseFloat(b[1]))}},contains:{message:'Must contain "%s"',isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "contains" rule';return"string"==typeof a&&null!==a.match(b[0])}},different:{message:'Can not have the same value as "%s" field',isValid:function(){var a=this.getParameters();return!(this.getValue()===o(a[0],this.prefix))}},email:{message:"Should be a valid email address",isValid:function(){var a=this.getValue();if("string"==typeof a){return/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(a)}return!1}},equals:{message:'Must be equal to "%s"',isValid:function(){var a=this.getValue(),b=this.getParameters(),c=!1;if(void 0===b[0])throw'Missing argument 1 for "equals" rule';return void 0!==b[1]&&(c=b[1]),"string"==typeof a&&!0==(!0===c?a===b[0]:a==b[0])}},in:{message:"Invalid input",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "in" rule';return b[0].indexOf(a)>=0}},ip:{message:"Invalid IP address",isValid:function(){var a=this.getValue();if("string"==typeof a){var b=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,c=/^((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*::((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*|((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4})){7}$/;return b.test(a)||c.test(a)}return!1}},ipv4:{message:"Invalid IPv4 address",isValid:function(){var a=this.getValue();if("string"==typeof a){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a)}return!1}},ipv6:{message:"Invalid IPv6 address",isValid:function(){var a=this.getValue();if("string"==typeof a){return/^((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*::((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4}))*|((?:[0-9A-Fa-f]{1,4}))((?::[0-9A-Fa-f]{1,4})){7}$/.test(a)}return!1}},isdate:{message:"Must be a valid date",isValid:function(){var a=this.getValue(),b=this.getParameters(),c=b[0];return!1!==q(a,c)}},isint:{message:"Must be an integer number",isValid:function(){return parseInt(this.getValue())==this.getValue()}},isnumeric:{message:"Must be a number",isValid:function(){var a=this.getValue();return!isNaN(parseFloat(a))&&isFinite(a)}},json:{message:"Invalid JSON string",isValid:function(){try{JSON.parse(this.getValue())}catch(a){return!1}return!0}},length:{message:"Should be %s characters long",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "length" rule';return"string"==typeof a&&a.length==b[0]}},lengthbetween:{message:"Should be between %s and %s characters long",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "lengthbetween" rule';if(void 0===b[1])throw'Missing argument 2 for "lengthbetween" rule';return"string"==typeof a&&(a.length>=b[0]&&a.length<=b[1])}},lengthmax:{message:"Maximum %s characters",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "lengthmax" rule';return"string"==typeof a&&a.length<=b[0]}},lengthmin:{message:"Minimum %s characters",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "lengthmin" rule';return"string"==typeof a&&a.length>=b[0]}},max:{message:"Must be less than or equal to %s",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "max" rule';return"string"==typeof a&&parseFloat(a)<=parseFloat(b[0])}},maxwords:{message:"Maximum of %s words exceeded",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "words" rule';return""===a.trim()&&0===parseInt(b[0])||a.trim().split(" ").length<=parseInt(b[0])}},min:{message:"Must be greater than or equal to %s",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "max" rule';return"string"==typeof a&&parseFloat(a)>=parseFloat(b[0])}},minwords:{message:"A minimum of %s words is required",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "words" rule';return""===a.trim()&&0===parseInt(b[0])||a.trim().split(" ").length>=parseInt(b[0])}},notcontains:{message:'May not contain "%s"',isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "notcontains" rule';return"string"==typeof a&&null===a.match(b[0])}},notequals:{message:'Must not be equal to "%s"',isValid:function(){var a=this.getValue(),b=this.getParameters(),c=!1;if(void 0===b[0])throw'Missing argument 1 for "notequals" rule';return void 0!==b[1]&&(c=b[1]),"string"==typeof a&&!0!=(!0===c?a!==b[0]:a!=b[0])}},notin:{message:"Invalid input",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "in" rule';return b[0].indexOf(a)<0}},present:{message:"Required",isValid:function(){return!(null===this.getValue()||void 0===this.getValue())}},regex:{message:"Invalid value",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "regex" rule';var c=b[0];if("string"==typeof b[0]&&(c=new RegExp(b[0])),"object"!=typeof c)throw'Argument 1 for "regex" rule should be a valid Regex object';return"string"==typeof a&&c.test(a)}},url:{message:"No valid URL",isValid:function(){var a=this.getValue();if("string"==typeof a){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a)}return!1}},words:{message:"Amount of words is not equal to %s",isValid:function(){var a=this.getValue(),b=this.getParameters();if(void 0===b[0])throw'Missing argument 1 for "words" rule';return""===a.trim()&&0===parseInt(b[0])||a.trim().split(" ").length===parseInt(b[0])}}},l=function(b,c,d,f,g){for(var h in c)e.push({rule:b,field:c[h],object:n(c[h],a),parameters:d,closure:f,prefix:a,message:g})},m=function(a){message=a.message,void 0===a.message&&(message=k[a.rule].message);for(var b in a.parameters)message=message.replace("%s",a.parameters[b]);if(i.short[a.field]=message,void 0!==a.prefix){var c=a.prefix+"["+a.field+"]";i.full[c]=message}else i.full[a.field]=message},n=function(a,c){return null!==c&&void 0!==c&&(a=c+"["+a+"]"),(void 0!==b&&void 0!==b.querySelector?b:document).querySelector('[name="'+a+'"]')},o=function(a,b){for(var c in f)if(f[c].getName()===a)return f[c].combine();null!==b&&void 0!==b&&(a=b+"["+a+"]");var d=n(a),e=null;if(null!==d)switch(d.nodeName.toLowerCase()){case"input":case"textarea":e=d.value;break;case"select":e=d.options[d.selectedIndex].value}return e},p=function(a){if(a===e.length)return g.end&&g.end(),0===Object.keys(i.short).length?g.passes&&g.passes():g.fails&&g.fails()},q=function(a,b){var c="",d=[];if("string"==typeof a){for(var e in b)switch(b[e]){case"Y":c+="([0-9]{4})",d.push("year");break;case"y":c+="([0-9]{2})",d.push("year");break;case"n":c+="([1-9]|1[0-2])",d.push("month");break;case"m":c+="(0[1-9]|1[0-2])",d.push("month");break;case"d":c+="(0[1-9]|1[0-9]|2[0-9]|3[0-1])",d.push("day");break;case"j":c+="([1-9]|1[0-9]|2[0-9]|3[0-1])",d.push("day");break;case"g":c+="([1-9]|1[0-2])",d.push("hour");break;case"G":c+="([0-9]|1[0-9]|2[0-3])",d.push("hour");break;case"h":c+="([0-9]|[1-5][0-9])",d.push("hour");break;case"H":c+="(0[0-9]|[1-5][0-9])",d.push("hour");break;case"i":c+="([0-5][0-9])",d.push("minute");break;case"s":c+="([0-5][0-9])",d.push("second");break;default:c+="\\"+b[e]}var f=a.match("^"+c+"$");if(null!==f){var g={year:null,month:null,day:null,hours:null,minutes:null,seconds:null};for(var e in d)g[d[e]]=f[1+parseInt(e)];var h=new Date(g.year,g.month-1,g.day,g.hours,g.minutes,g.seconds,0);if(h.getDate()===parseInt(g.day))return h}}return!1},r=function(a,b){return void 0!==j[a]&&!1===j[a]&&""===b.trim()};this.exec=function(){g.start&&g.start();var a=0;for(var b in e){var c=o(e[b].field,e[b].prefix);if("function"!=typeof e[b].closure){var d=e[b].rule,h=k[d];if(h.setField(e[b].field),h.setValue(c),h.setPrefix(e[b].prefix),h.setParameters(e[b].parameters),h.setObject(n(e[b].field,e[b].prefix)),!1===r(e[b].field,c)&&!1===h.isValid()){m(e[b]);for(var i in f)if(f[i].getName()===e[b].field){var j=f[i].getFieldnames();for(var l in j)e[b].field=j[l],m(e[b]);break}}p(++a)}else e[b].closure(e[b].field,c,function(){return m(e[b]),p(++a)},function(){p(++a)})}},this.extend=function(a,b,c){"string"==typeof a&&(a=[a]),l(null,a,null,b,c)},this.combine=function(){var b=arguments,d=[];for(field in b)d.push(o(b[field],a));return comb=new c,comb.setValues(d),comb.setFieldnames(b),f.push(comb),comb},this.field=function(){var a=arguments,b={};for(var c in k)!function(c){b[c]=function(){return l(c,a,arguments),this}}(c);return b.required=function(b){void 0===b&&(b=!0);for(var c in a)j[a[c]]=b;return this},b},this.setMessage=function(){var a=arguments,b={};for(var c in k)!function(c){b[c]=function(b){if(0===a.length)for(var d in e)e[d].rule===c&&(e[d].message=b);else for(var d in e)for(var f in a)e[d].rule===c&&a[f]===e[d].field&&(e[d].message=b);return this}}(c);return b},this.getMessages=function(a){return!0===a?i.full:i.short},this.getMessage=function(a){return void 0!==i.short[a]?i.short[a]:i.full[a]},this.on=function(a,b){g[a]=b};for(var s in k){var t=k[s];k[s]=Object.create(d);for(var u in t)k[s][u]=t[u]}}